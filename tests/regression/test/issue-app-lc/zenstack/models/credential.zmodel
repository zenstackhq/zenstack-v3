import '../shared/timestamps'
import './account'

model Credential with Timestamps {
  id         String   @id

  /// The public key of the credential
  publicKey  String

  /// Counter of how many times the credential has been used
  counter    Int

  /// Whether the credential has been backed up
  backedUp   Boolean  @default(false)

  /// The transports of the credential
  transports String[]

  // Relations
  /// The account that owns the credential
  accountId  String

  /// The account that owns the credential
  account    Account  @relation(fields: [accountId], references: [id], onDelete: Cascade)

  @@allow('all', auth().id == accountId) // Only owner can read, create, update and delete
}
